# í‹°ì¼“ ìë™ë¶„ë¥˜ ì‹ ë¢°ë„ ì¸¡ì • ë¡œì§ ë¶„ì„

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ì‹ ë¢°ë„ ì¸¡ì • í”„ë¡œì„¸ìŠ¤](#ì‹ ë¢°ë„-ì¸¡ì •-í”„ë¡œì„¸ìŠ¤)
3. [ì‹ ë¢°ë„ ê³„ì‚° ë°©ì‹](#ì‹ ë¢°ë„-ê³„ì‚°-ë°©ì‹)
4. [ì‹ ë¢°ë„ í†µê³„ ì§‘ê³„](#ì‹ ë¢°ë„-í†µê³„-ì§‘ê³„)
5. [ìˆ˜ì¹˜ ì„¤ì • ê¸°ì¤€ ë¶„ì„](#ìˆ˜ì¹˜-ì„¤ì •-ê¸°ì¤€-ë¶„ì„)
6. [ë¬¸ì œì  ë° ê°œì„  ë°©ì•ˆ](#ë¬¸ì œì -ë°-ê°œì„ -ë°©ì•ˆ)

---

## ê°œìš”

`services/auto_classify.py` íŒŒì¼ì—ì„œ ì§„í–‰í•˜ëŠ” í‹°ì¼“ ìë™ë¶„ë¥˜ ì‹œ ì‹ ë¢°ë„(confidence)ë¥¼ ì¸¡ì •í•˜ëŠ” ë¡œì§ì— ëŒ€í•œ ìƒì„¸ ë¶„ì„ ë¬¸ì„œì…ë‹ˆë‹¤.

ì‹ ë¢°ë„ ì¸¡ì •ì€ í¬ê²Œ **3ë‹¨ê³„**ë¡œ ì§„í–‰ë©ë‹ˆë‹¤:

1. ê°œë³„ í‹°ì¼“ ë¶„ë¥˜ ì‹œ ì‹ ë¢°ë„ ê³„ì‚°
2. ì „ì²´ í‹°ì¼“ ì‹ ë¢°ë„ í†µê³„ ì§‘ê³„
3. í‹°ì¼“ ì¤‘ìš”ë„ íŒì •

---

## ì‹ ë¢°ë„ ì¸¡ì • í”„ë¡œì„¸ìŠ¤

```mermaid
graph TD
    A[í‹°ì¼“ ë¶„ë¥˜ ì‹œì‘] --> B{ë¶„ë¥˜ ì—”ì§„ ì„ íƒ}
    B -->|ê·œì¹™ ê¸°ë°˜| C[RuleBasedClassifier]
    B -->|AI ê¸°ë°˜| D[AIClassifier]

    C --> E[inquiry_type ë§¤ì¹­]
    E -->|ì„±ê³µ| F[confidence = 0.9]
    E -->|ì‹¤íŒ¨| G[í‚¤ì›Œë“œ ë§¤ì¹­]
    G -->|ì„±ê³µ| H[confidence = 0.6 + í‚¤ì›Œë“œìˆ˜*0.05]
    G -->|ì‹¤íŒ¨| I[confidence = 0.5]

    D --> J[Hugging Face ëª¨ë¸ ì¶”ë¡ ]
    J --> K[ëª¨ë¸ ì˜ˆì¸¡ í™•ë¥ ê°’]

    F --> L[ì‹ ë¢°ë„ í†µê³„ ì§‘ê³„]
    H --> L
    I --> L
    K --> L

    L --> M[ì¤‘ìš”ë„ íŒì •]
    M --> N[ìƒ: â‰¥0.9 / ì¤‘: 0.7~0.9 / í•˜: <0.7]
```

---

## ì‹ ë¢°ë„ ê³„ì‚° ë°©ì‹

### 1ï¸âƒ£ ê·œì¹™ ê¸°ë°˜ ë¶„ë¥˜ (RuleBasedClassifier)

**íŒŒì¼ ìœ„ì¹˜:** `utils/classifiers/rule_based_classifier.py`

#### ì‹ ë¢°ë„ ê³„ì‚° ì¼€ì´ìŠ¤

| ì¼€ì´ìŠ¤                     | ì‹ ë¢°ë„                            | ì¡°ê±´                                     |
| -------------------------- | --------------------------------- | ---------------------------------------- |
| **inquiry_type ë§¤ì¹­ ì„±ê³µ** | `0.9`                             | `inquiry_type` í•„ë“œê°€ ê·œì¹™ê³¼ ì •í™•íˆ ë§¤ì¹­ |
| **í‚¤ì›Œë“œ ê¸°ë°˜ ë§¤ì¹­**       | `min(0.9, 0.6 + í‚¤ì›Œë“œìˆ˜ Ã— 0.05)` | ë³¸ë¬¸/ì œëª©ì—ì„œ í‚¤ì›Œë“œ ë°œê²¬                |
| **ë§¤ì¹­ ì‹¤íŒ¨ (ê¸°íƒ€ ë¶„ë¥˜)**  | `0.5`                             | ì–´ë–¤ ê·œì¹™ì—ë„ ë§¤ì¹­ë˜ì§€ ì•ŠìŒ              |
| **ì‹œìŠ¤í…œ ì˜¤ë¥˜**            | `0.3`                             | ì¹´í…Œê³ ë¦¬ ID ì¡°íšŒ ì‹¤íŒ¨ ë“±                 |

#### ì½”ë“œ ì˜ˆì‹œ

```python
# 1. inquiry_type í•„ë“œë¡œ ë§¤ì¹­ ì„±ê³µ ì‹œ
confidence = 0.9  # ë†’ì€ ì‹ ë¢°ë„

# 2. ë³¸ë¬¸/ì œëª© í‚¤ì›Œë“œ ê¸°ë°˜ ë§¤ì¹­ ì‹œ
# - ë§¤ì¹­ëœ í‚¤ì›Œë“œ ê°œìˆ˜ì— ë”°ë¼ ì ìˆ˜ ê³„ì‚°
confidence = min(0.9, 0.6 + (matched_count * 0.05))  # ìµœëŒ€ 0.9

# 3. ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ (ê¸°íƒ€ ë¶„ë¥˜)
confidence = 0.5
```

#### í‚¤ì›Œë“œ ë§¤ì¹­ ì‹ ë¢°ë„ ê³„ì‚° ì˜ˆì‹œ

```python
# í‚¤ì›Œë“œ 1ê°œ ë§¤ì¹­
confidence = 0.6 + (1 * 0.05) = 0.65 (65%)

# í‚¤ì›Œë“œ 3ê°œ ë§¤ì¹­
confidence = 0.6 + (3 * 0.05) = 0.75 (75%)

# í‚¤ì›Œë“œ 6ê°œ ë§¤ì¹­
confidence = 0.6 + (6 * 0.05) = 0.9 (90%)

# í‚¤ì›Œë“œ 10ê°œ ë§¤ì¹­
confidence = min(0.9, 0.6 + 10*0.05) = min(0.9, 1.1) = 0.9 (ìµœëŒ€ 90%)
```

#### ì‹¤ì œ ë¶„ë¥˜ ë¡œì§

**íŒŒì¼:** `utils/classifiers/rule_based_classifier.py` (163-230í–‰)

```python
def classify_ticket(self, ticket: Dict[str, Any]) -> Dict[str, Any]:
    inquiry_type = (ticket.get('inquiry_type') or '').strip()
    body = ticket.get('body') or ''
    title = ticket.get('title') or ''

    # 1. inquiry_typeìœ¼ë¡œ ì¹´í…Œê³ ë¦¬ ë§¤í•‘ ì‹œë„
    if inquiry_type:
        category_name = self.inquiry_rules.get(inquiry_type)
        if category_name:
            confidence = 0.9  # inquiry_type ë§¤ì¹­ ì‹œ ë†’ì€ ì‹ ë¢°ë„

    # 2. inquiry_type ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ ë³¸ë¬¸/ì œëª© í‚¤ì›Œë“œ ê¸°ë°˜ ì¶”ë¡ 
    if not category_name:
        category_name, confidence, matched_keywords = self._classify_by_keywords(body, title)

    # 3. ì—¬ì „íˆ ì‹¤íŒ¨ ì‹œ 'ê¸°íƒ€'ë¡œ ë¶„ë¥˜
    if not category_name:
        category_name = 'ê¸°íƒ€'
        confidence = 0.5

    return {
        'category_id': category_id,
        'category_name': category_name,
        'confidence': confidence,
        'keywords': keywords,
        'method': 'rule_based'
    }
```

---

### 2ï¸âƒ£ AI ê¸°ë°˜ ë¶„ë¥˜ (AIClassifier)

**íŒŒì¼ ìœ„ì¹˜:** `utils/classifiers/ai_classifier.py`

#### ì‹ ë¢°ë„ ê³„ì‚° ë°©ì‹

- **Hugging Face ëª¨ë¸ì´ ì§ì ‘ ê³„ì‚°í•œ í™•ë¥ ê°’ ì‚¬ìš©**
- `result['scores'][0]` - ê°€ì¥ ë†’ì€ ì¹´í…Œê³ ë¦¬ì˜ ì˜ˆì¸¡ í™•ë¥ 
- **ë²”ìœ„:** 0.0 ~ 1.0 (ëª¨ë¸ì— ë”°ë¼ ë‹¤ë¦„)

#### ì½”ë“œ ì˜ˆì‹œ

```python
# Zero-shot classification ì‹¤í–‰
result = self.pipeline(
    text,
    candidate_labels=self.category_labels,
    hypothesis_template="This text is about {}."
)

# ê²°ê³¼ íŒŒì‹±
best_label = result['labels'][0]
best_score = result['scores'][0]  # ëª¨ë¸ì´ ê³„ì‚°í•œ í™•ë¥ ê°’

return {
    'category_id': category_id,
    'category_name': best_label,
    'confidence': float(best_score),  # ì‹ ë¢°ë„ë¡œ ì‚¬ìš©
    'method': 'ai_huggingface'
}
```

---

## ì‹ ë¢°ë„ í†µê³„ ì§‘ê³„

**íŒŒì¼:** `services/auto_classify.py` (192-225í–‰)

ëª¨ë“  í‹°ì¼“ ë¶„ë¥˜ í›„, `_calculate_reliability_stats` ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì–´ ì „ì²´ í†µê³„ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.

### ê³„ì‚°ë˜ëŠ” ì§€í‘œ

| ì§€í‘œ                      | ì„¤ëª…                | ê¸°ì¤€                        |
| ------------------------- | ------------------- | --------------------------- |
| `total_tickets`           | ì „ì²´ í‹°ì¼“ ìˆ˜        | -                           |
| `average_confidence`      | í‰ê·  ì‹ ë¢°ë„         | ëª¨ë“  í‹°ì¼“ì˜ ì‹ ë¢°ë„ í‰ê·      |
| `high_confidence_count`   | ë†’ì€ ì‹ ë¢°ë„ í‹°ì¼“ ìˆ˜ | ì‹ ë¢°ë„ â‰¥ 0.8                |
| `high_confidence_ratio`   | ë†’ì€ ì‹ ë¢°ë„ ë¹„ìœ¨    | high_count / total          |
| `medium_confidence_count` | ì¤‘ê°„ ì‹ ë¢°ë„ í‹°ì¼“ ìˆ˜ | 0.7 â‰¤ ì‹ ë¢°ë„ < 0.8          |
| `medium_confidence_ratio` | ì¤‘ê°„ ì‹ ë¢°ë„ ë¹„ìœ¨    | medium_count / total        |
| `low_confidence_count`    | ë‚®ì€ ì‹ ë¢°ë„ í‹°ì¼“ ìˆ˜ | ì‹ ë¢°ë„ < 0.7                |
| `low_confidence_ratio`    | ë‚®ì€ ì‹ ë¢°ë„ ë¹„ìœ¨    | low_count / total           |
| `needs_review_count`      | ì¬ê²€í†  í•„ìš” í‹°ì¼“ ìˆ˜ | low_confidence_countì™€ ë™ì¼ |

### ì½”ë“œ

```python
def _calculate_reliability_stats(self, classifications: List[Dict]) -> Dict[str, Any]:
    """ì‹ ë¢°ë„ í†µê³„ ê³„ì‚°"""
    confidences = [item['classification']['confidence'] for item in classifications]
    total = len(confidences)

    # í‰ê·  ì‹ ë¢°ë„
    avg_confidence = sum(confidences) / total

    # ì‹ ë¢°ë„ ë¶„í¬ ê³„ì‚°
    high_conf = sum(1 for c in confidences if c >= 0.8)      # 80% ì´ìƒ: ë†’ìŒ
    medium_conf = sum(1 for c in confidences if 0.7 <= c < 0.8)  # 70~80%: ì¤‘ê°„
    low_conf = sum(1 for c in confidences if c < 0.7)        # 70% ë¯¸ë§Œ: ë‚®ìŒ

    return {
        'total_tickets': total,
        'average_confidence': round(avg_confidence, 3),
        'high_confidence_count': high_conf,
        'high_confidence_ratio': round(high_conf / total, 3),
        'medium_confidence_count': medium_conf,
        'medium_confidence_ratio': round(medium_conf / total, 3),
        'low_confidence_count': low_conf,
        'low_confidence_ratio': round(low_conf / total, 3),
        'needs_review_count': low_conf  # ì¬ê²€í†  í•„ìš”
    }
```

---

## í‹°ì¼“ ì¤‘ìš”ë„ íŒì •

**íŒŒì¼:** `services/auto_classify.py` (352-359í–‰)

ê°œë³„ í‹°ì¼“ì˜ ì¤‘ìš”ë„ëŠ” ì‹ ë¢°ë„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒì •ë©ë‹ˆë‹¤.

### ì¤‘ìš”ë„ ê¸°ì¤€

| ì¤‘ìš”ë„ | ì‹ ë¢°ë„ ë²”ìœ„ | ì˜ë¯¸                               |
| ------ | ----------- | ---------------------------------- |
| **ìƒ** | â‰¥ 0.9       | ë§¤ìš° í™•ì‹¤í•œ ë¶„ë¥˜, ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥ |
| **ì¤‘** | 0.7 ~ 0.9   | ì¼ë°˜ì ì¸ ë¶„ë¥˜, ëŒ€ë¶€ë¶„ ì •í™•         |
| **í•˜** | < 0.7       | ì¬ê²€í†  í•„ìš”, ìˆ˜ë™ í™•ì¸ ê¶Œì¥        |

### ì½”ë“œ

```python
def _calculate_importance(self, confidence: float) -> str:
    """ì‹ ë¢°ë„ ê¸°ë°˜ ì¤‘ìš”ë„ ê³„ì‚°"""
    if confidence >= 0.9:
        return 'ìƒ'
    elif confidence >= 0.7:
        return 'ì¤‘'
    else:
        return 'í•˜'
```

---

## ìˆ˜ì¹˜ ì„¤ì • ê¸°ì¤€ ë¶„ì„

### ğŸ” ì™œ ìµœëŒ€ê°’ì´ 0.9 (90%)ì¸ê°€?

**ê·œì¹™ ê¸°ë°˜ ë¶„ë¥˜ëŠ” 100% í™•ì‹ í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.**

#### ì´ìœ 

| ì œì•½ì‚¬í•­        | ì„¤ëª…                                              |
| --------------- | ------------------------------------------------- |
| **ì‚¬ëŒì˜ ì‹¤ìˆ˜** | `inquiry_type` í•„ë“œë¥¼ ì˜ëª» ì„ íƒí•  ìˆ˜ ìˆìŒ         |
| **ë°ì´í„° í’ˆì§ˆ** | ì˜¤íƒ€, ëª¨í˜¸í•œ í‘œí˜„, ë³µí•©ì ì¸ ë¬¸ì˜ ì¡´ì¬             |
| **ë§¥ë½ ë¶€ì¡±**   | ê·œì¹™ ê¸°ë°˜ì€ ë‹¨ì–´ ë§¤ì¹­ë§Œìœ¼ë¡œ íŒë‹¨ (ì˜ë¯¸ íŒŒì•… ë¶ˆê°€) |
| **ë³´ìˆ˜ì  ì ‘ê·¼** | 10%ì˜ ë¶ˆí™•ì‹¤ì„±ì„ ë‚¨ê²¨ë‘ëŠ” ê²ƒì´ í˜„ì‹¤ì              |

#### ì‹¤ì œ ì˜ˆì‹œ

```text
í‹°ì¼“: "ë°°ì†¡ì´ ëŠ¦ì–´ì„œ í™˜ë¶ˆí•´ì£¼ì„¸ìš”"
â†’ 'ë°°ì†¡' í‚¤ì›Œë“œë¡œ ë¶„ë¥˜ë˜ì§€ë§Œ, ì‹¤ì œ ì˜ë„ëŠ” 'í™˜ë¶ˆ'ì¼ ìˆ˜ ìˆìŒ
â†’ 100% í™•ì‹ í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ 90%ê°€ ì ì ˆ
```

---

### ğŸ“Š ê° ìˆ˜ì¹˜ë¥¼ ì •í•œ ê¸°ì¤€

| ìƒí™©                   | ì‹ ë¢°ë„    | ê¸°ì¤€ ì„¤ëª…                                                  |
| ---------------------- | --------- | ---------------------------------------------------------- |
| **inquiry_type ë§¤ì¹­**  | **0.9**   | êµ¬ì¡°í™”ëœ í•„ë“œ ê¸°ë°˜ â†’ ê°€ì¥ ì‹ ë¢°ë„ ë†’ìŒ (í•˜ì§€ë§Œ 100%ëŠ” ì•„ë‹˜) |
| **í‚¤ì›Œë“œ ë§¤ì¹­ (ê¸°ë³¸)** | **0.6**   | í‚¤ì›Œë“œ 1ê°œë§Œ ë°œê²¬ë˜ì–´ë„ 60%ë¶€í„° ì‹œì‘ (ì ˆë°˜ ì´ìƒ í™•ì‹ )      |
| **í‚¤ì›Œë“œ 1ê°œë‹¹ ì¦ê°€**  | **+0.05** | í‚¤ì›Œë“œê°€ ë§ì„ìˆ˜ë¡ ì‹ ë¢°ë„ ì¦ê°€ (6ê°œ ì´ìƒ â†’ 0.9 ë„ë‹¬)        |
| **ë§¤ì¹­ ì‹¤íŒ¨ (ê¸°íƒ€)**   | **0.5**   | ì „í˜€ ëª¨ë¥¼ ë•Œ 50% - ì¤‘ë¦½ì  ì…ì¥                             |
| **ì‹œìŠ¤í…œ ì˜¤ë¥˜**        | **0.3**   | ë¶„ë¥˜ ìì²´ê°€ ì‹¤íŒ¨í•œ ê²½ìš° - ê°€ì¥ ë‚®ì€ ì‹ ë¢°ë„                 |

#### ìˆ˜ì¹˜ì˜ ì˜ë¯¸

```python
# 0.9: "ë§¤ìš° í™•ì‹ í•˜ì§€ë§Œ ì™„ë²½í•˜ì§€ëŠ” ì•ŠìŒ"
# - inquiry_typeì´ ëª…í™•í•˜ê±°ë‚˜ í‚¤ì›Œë“œê°€ 6ê°œ ì´ìƒ ë§¤ì¹­

# 0.6: "ì ˆë°˜ ì´ìƒì€ í™•ì‹ í•¨"
# - í‚¤ì›Œë“œ 1ê°œë§Œ ë°œê²¬ëœ ê²½ìš°ì˜ ê¸°ë³¸ê°’
# - ìµœì†Œí•œì˜ ê·¼ê±°ê°€ ìˆëŠ” ìƒíƒœ

# 0.05: "í‚¤ì›Œë“œ 1ê°œë‹¹ 5% ì‹ ë¢°ë„ ì¦ê°€"
# - í‚¤ì›Œë“œê°€ ë§ì„ìˆ˜ë¡ í™•ì‹¤ë„ê°€ ë†’ì•„ì§
# - 6ê°œ ì´ìƒì´ë©´ ìµœëŒ€ì¹˜(0.9) ë„ë‹¬

# 0.5: "ëª¨ë¥´ê² ìŒ (ì¤‘ë¦½)"
# - ì•„ë¬´ëŸ° ê·¼ê±°ê°€ ì—†ëŠ” ìƒíƒœ
# - ë¬´ì‘ìœ„ ì¶”ì¸¡ë³´ë‹¤ëŠ” ë‚˜ì€ ìˆ˜ì¤€

# 0.3: "ì‹¬ê°í•œ ë¬¸ì œ"
# - ì‹œìŠ¤í…œ ì˜¤ë¥˜ë‚˜ ë°ì´í„° ì´ìƒ
# - ì‚¬ëŒì˜ ê²€í† ê°€ í•„ìˆ˜ì ìœ¼ë¡œ í•„ìš”
```

---

## ë¬¸ì œì  ë° ê°œì„  ë°©ì•ˆ

### âŒ í˜„ì¬ì˜ í•œê³„

#### 1. ê³¼í•™ì  ê·¼ê±° ë¶€ì¡±

- 0.6, 0.05 ê°™ì€ ê°’ì´ **ê²½í—˜ì /íœ´ë¦¬ìŠ¤í‹±**í•˜ê²Œ ì •í•´ì§
- ì‹¤ì œ ê²€ì¦ ì—†ì´ "ê·¸ëŸ´ë“¯í•œ" ìˆ«ìë¡œ ì„¤ì •

#### 2. ë°ì´í„° ê²€ì¦ ì—†ìŒ

- **ì‹¤ì œ ì •í™•ë„ì™€ ì‹ ë¢°ë„ê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸ ì•ˆ ë¨**
- ì‹ ë¢°ë„ 0.9ë¼ê³  í–ˆëŠ”ë° ì‹¤ì œë¡œëŠ” 70%ë§Œ ì •í™•í•  ìˆ˜ë„ ìˆìŒ

#### 3. ì¼ë¥ ì  ì ìš©

- ëª¨ë“  ì¹´í…Œê³ ë¦¬ì— ë™ì¼í•œ ê¸°ì¤€ ì ìš©
- ì¹´í…Œê³ ë¦¬ë§ˆë‹¤ ë¶„ë¥˜ ë‚œì´ë„ê°€ ë‹¤ë¥¸ë° ê³ ë ¤ ì•ˆ ë¨

#### 4. ì‹ ë¢°ë„ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ë¶€ì¬

- ëª¨ë¸ì´ ìì‹ ê° ìˆê²Œ í‹€ë¦´ ìˆ˜ ìˆìŒ (Overconfidence)
- ì‹ ë¢°ë„ì™€ ì‹¤ì œ ì •í™•ë„ ê°„ ê´´ë¦¬ ê°€ëŠ¥

---

### âœ… ê°œì„  ë°©ì•ˆ

#### 1. ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ ìº˜ë¦¬ë¸Œë ˆì´ì…˜

```python
# ì˜ˆì‹œ: 100ê°œ í‹°ì¼“ì„ ìˆ˜ë™ìœ¼ë¡œ ë¶„ë¥˜í•˜ê³  ë¹„êµ
manual_labels = [...]  # ì‚¬ëŒì´ ì§ì ‘ ë¶„ë¥˜í•œ ì •ë‹µ
predicted_labels = [...]  # ì‹œìŠ¤í…œ ë¶„ë¥˜ ê²°ê³¼
confidences = [...]  # ì‹œìŠ¤í…œì´ ê³„ì‚°í•œ ì‹ ë¢°ë„

# ì‹ ë¢°ë„ êµ¬ê°„ë³„ ì‹¤ì œ ì •í™•ë„ ê³„ì‚°
for conf_range in [(0.9, 1.0), (0.8, 0.9), (0.7, 0.8)]:
    actual_accuracy = calculate_accuracy_in_range(conf_range)
    print(f"ì‹ ë¢°ë„ {conf_range}: ì‹¤ì œ ì •í™•ë„ {actual_accuracy}")

# ê²°ê³¼ ì˜ˆì‹œ:
# ì‹ ë¢°ë„ 0.9~1.0: ì‹¤ì œ ì •í™•ë„ 85% â†’ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ í•„ìš”
# ì‹ ë¢°ë„ 0.8~0.9: ì‹¤ì œ ì •í™•ë„ 78%
# ì‹ ë¢°ë„ 0.7~0.8: ì‹¤ì œ ì •í™•ë„ 65%
```

#### 2. ì¹´í…Œê³ ë¦¬ë³„ ì°¨ë“± ì‹ ë¢°ë„

```python
# ì¹´í…Œê³ ë¦¬ë³„ ë‚œì´ë„ë¥¼ ê³ ë ¤í•œ ì¡°ì •
category_confidence_multiplier = {
    'ë°°ì†¡': 0.95,      # ë°°ì†¡ì€ í‚¤ì›Œë“œê°€ ëª…í™•í•´ì„œ ë” ë†’ì€ ì‹ ë¢°ë„
    'í’ˆì§ˆ/í•˜ì': 0.90, # í’ˆì§ˆì€ íŒë‹¨ì´ ë¹„êµì  ëª…í™•
    'ì´ë²¤íŠ¸': 0.85,    # ì´ë²¤íŠ¸ëŠ” ëª¨í˜¸í•  ìˆ˜ ìˆì–´ì„œ ë‚®ì¶¤
    'ì¼ë°˜': 0.75,      # ì¼ë°˜ ë¬¸ì˜ëŠ” ê°€ì¥ ëª¨í˜¸í•¨
}

# ì ìš©
base_confidence = 0.9
category = 'ë°°ì†¡'
final_confidence = base_confidence * category_confidence_multiplier[category]
# â†’ 0.9 * 0.95 = 0.855
```

#### 3. í‚¤ì›Œë“œ ê°€ì¤‘ì¹˜ ì ìš©

```python
# ì¤‘ìš”ë„ê°€ ë†’ì€ í‚¤ì›Œë“œì— ë” í° ê°€ì¤‘ì¹˜ ë¶€ì—¬
keyword_weights = {
    # ëª…í™•í•œ í‚¤ì›Œë“œ (ë†’ì€ ê°€ì¤‘ì¹˜)
    'ë¶ˆëŸ‰': 3.0,
    'í™˜ë¶ˆ': 2.5,
    'ë°°ì†¡ì§€ì—°': 2.5,

    # ëª¨í˜¸í•œ í‚¤ì›Œë“œ (ë‚®ì€ ê°€ì¤‘ì¹˜)
    'ë¬¸ì˜': 1.0,
    'í™•ì¸': 1.0,
    'ì•ˆë‚´': 1.0,
}

# ê°€ì¤‘ì¹˜ ì ìš©í•œ ì‹ ë¢°ë„ ê³„ì‚°
def calculate_weighted_confidence(matched_keywords):
    weighted_score = sum(keyword_weights.get(kw, 1.0) for kw in matched_keywords)
    confidence = min(0.9, 0.5 + (weighted_score * 0.03))
    return confidence
```

#### 4. ì‹ ë¢°ë„ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ê³¡ì„ 

```python
# Temperature Scalingì„ ì‚¬ìš©í•œ ì‹ ë¢°ë„ ë³´ì •
def calibrate_confidence(raw_confidence, temperature=1.5):
    """
    temperature > 1: ì‹ ë¢°ë„ë¥¼ ë” ë³´ìˆ˜ì ìœ¼ë¡œ (ë‚®ì¶¤)
    temperature < 1: ì‹ ë¢°ë„ë¥¼ ë” ê³µê²©ì ìœ¼ë¡œ (ë†’ì„)
    """
    import math
    calibrated = 1 / (1 + math.exp(-math.log(raw_confidence / (1 - raw_confidence)) / temperature))
    return calibrated

# ì˜ˆì‹œ
raw = 0.9
calibrated = calibrate_confidence(raw, temperature=1.5)
# â†’ 0.85 ì •ë„ë¡œ ë³´ì •ë¨
```

#### 5. A/B í…ŒìŠ¤íŠ¸ë¥¼ í†µí•œ ìµœì í™”

```python
# ì„œë¡œ ë‹¤ë¥¸ ì‹ ë¢°ë„ ì„¤ì •ìœ¼ë¡œ ì‹¤í—˜
experiments = {
    'conservative': {
        'inquiry_type_conf': 0.85,
        'keyword_base': 0.55,
        'keyword_increment': 0.04,
    },
    'aggressive': {
        'inquiry_type_conf': 0.95,
        'keyword_base': 0.65,
        'keyword_increment': 0.06,
    },
    'current': {
        'inquiry_type_conf': 0.9,
        'keyword_base': 0.6,
        'keyword_increment': 0.05,
    }
}

# ê° ì„¤ì •ìœ¼ë¡œ 100ê°œ í‹°ì¼“ ë¶„ë¥˜ â†’ ì‹¤ì œ ì •í™•ë„ ë¹„êµ
# â†’ ê°€ì¥ ì„±ëŠ¥ ì¢‹ì€ ì„¤ì • ì±„íƒ
```

---

## ğŸ“Œ ìš”ì•½

### í˜„ì¬ ì‹œìŠ¤í…œ

```
ê·œì¹™ ê¸°ë°˜ ìµœëŒ€ ì‹ ë¢°ë„: 0.9 (90%)
â””â”€ ì´ìœ : ê·œì¹™ ê¸°ë°˜ì€ 100% í™•ì‹  ë¶ˆê°€ (ë§¥ë½ ë¶€ì¡±, ë°ì´í„° í’ˆì§ˆ ì´ìŠˆ)

ì‹ ë¢°ë„ ê³„ì‚°:
â”œâ”€ inquiry_type ë§¤ì¹­: 0.9
â”œâ”€ í‚¤ì›Œë“œ ë§¤ì¹­: 0.6 + (í‚¤ì›Œë“œìˆ˜ Ã— 0.05), ìµœëŒ€ 0.9
â”œâ”€ ë§¤ì¹­ ì‹¤íŒ¨: 0.5
â””â”€ ì‹œìŠ¤í…œ ì˜¤ë¥˜: 0.3

ìˆ˜ì¹˜ ê¸°ì¤€: ê²½í—˜ì  íœ´ë¦¬ìŠ¤í‹± (ê²€ì¦ í•„ìš”)
```

### ê¶Œì¥ ê°œì„  ì‚¬í•­

1. **ì‹¤ì œ ë°ì´í„°ë¡œ ê²€ì¦** - 100ê°œ ì´ìƒ ìƒ˜í”Œ ìˆ˜ë™ ë¶„ë¥˜ í›„ ì •í™•ë„ ì¸¡ì •
2. **ìº˜ë¦¬ë¸Œë ˆì´ì…˜** - ì‹ ë¢°ë„ì™€ ì‹¤ì œ ì •í™•ë„ ì¼ì¹˜ì‹œí‚¤ê¸°
3. **ì¹´í…Œê³ ë¦¬ë³„ ì¡°ì •** - ë‚œì´ë„ì— ë”°ë¼ ì°¨ë“± ì ìš©
4. **í‚¤ì›Œë“œ ê°€ì¤‘ì¹˜** - ì¤‘ìš”í•œ í‚¤ì›Œë“œì— ë” ë†’ì€ ì ìˆ˜ ë¶€ì—¬
5. **ì§€ì†ì  ëª¨ë‹ˆí„°ë§** - ì •ê¸°ì ìœ¼ë¡œ ì‹ ë¢°ë„ vs ì •í™•ë„ ë¹„êµ

---

## ğŸ“š ì°¸ê³  íŒŒì¼

- `services/auto_classify.py` - ìë™ë¶„ë¥˜ ì„œë¹„ìŠ¤ ë©”ì¸ ë¡œì§
- `utils/classifiers/rule_based_classifier.py` - ê·œì¹™ ê¸°ë°˜ ë¶„ë¥˜ê¸°
- `utils/classifiers/ai_classifier.py` - AI ê¸°ë°˜ ë¶„ë¥˜ê¸°
- `controllers/auto_classify.py` - API ì—”ë“œí¬ì¸íŠ¸

---

**ì‘ì„±ì¼:** 2025-10-20  
**ë²„ì „:** 1.0
