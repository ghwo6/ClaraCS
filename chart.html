<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stacked Bar + Line Chart</title>
</head>
<body>

<canvas id="myChart"></canvas>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
const ctx = document.getElementById('myChart').getContext('2d');

const labels = [
  '2023-01-01', '2023-01-02', '2023-01-03',
  '2023-01-04', '2023-01-05', '2023-01-06', '2023-01-07'
];

const data = {
  labels: labels,
  datasets: [
    {
      type: 'bar',
      label: 'A',
      data: [10, 15, 20, 25, 30, 35, 40],
      backgroundColor: 'skyblue',
      stack: 'stack1',
    },
    {
      type: 'bar',
      label: 'B',
      data: [5, 10, 15, 10, 5, 10, 15],
      backgroundColor: 'lightgreen',
      stack: 'stack1',
    },
    {
      type: 'bar',
      label: 'C',
      data: [2, 3, 4, 5, 6, 7, 8],
      backgroundColor: 'orange',
      stack: 'stack1',
    },
    {
      type: 'line',
      label: 'Total',
      data: [17, 28, 39, 40, 41, 52, 63],
      borderColor: 'red',
      backgroundColor: 'red',
      fill: false,
      tension: 0.3,
      yAxisID: 'y',
    }
  ]
};

const config = {
  type: 'bar',
  data: data,
  options: {
    responsive: true,
    interaction: {
      mode: 'index',
      intersect: false,
    },
    stacked: true,
    scales: {
      x: {
        stacked: true,
      },
      y: {
        stacked: true,
        beginAtZero: true,
      }
    }
  }
};

new Chart(ctx, config);
</script>

</body>
</html>
